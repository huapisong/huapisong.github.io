<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  

  
  
  
  
  
  
  <title>随记</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="随记">
<meta property="og:url" content="http://yoursite.com/page/4/index.html">
<meta property="og:site_name" content="随记">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="随记">
  
  
    <link rel="icon" href="/css/images/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  

  
  <!-- baidu webmaster push -->
  <script src="//push.zhanzhang.baidu.com/push.js"></script>
</head></html>
<body class="home blog custom-background custom-font-enabled single-author">
  <div id="page" class="hfeed site">
      <header id="masthead" class="site-header" role="banner">
    <hgroup>
      <h1 class="site-title">
        <a href="/" title="随记" rel="home">随记</a>
      </h1>
      
        <h2 class="site-description hitokoto"></h2>
        <script type="text/javascript" src="https://v1.hitokoto.cn/?encode=js"></script>
      
    </hgroup>

    <nav id="site-navigation" class="main-navigation" role="navigation">
            <button class="menu-toggle">菜单</button>
            <a class="assistive-text" href="/#content" title="跳至内容">跳至内容</a><!--TODO-->
            <div class="menu-main-container">
                <ul id="menu-main" class="nav-menu">
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/">Home</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/archives">Archives</a></li>
                
                </ul>
            </div>
    </nav>
</header>

      <div id="main" class="wrapper">
        <div id="primary" class="site-content"><div id="content" role="main">
  
    <article id="post-右键添加Notepad2" class="post-右键添加Notepad2 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2018/01/01/右键添加Notepad2/">右键添加Notepad2</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2018/01/01/右键添加Notepad2/" data-id="cjzam8fzx001ggouhd8ffv2ja" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>1、  首先打开注册表，windows+ R运行，在运行窗口中输入regedit，进入注册表编辑器<br>2、  在左边的导航中找到路径：HKEY_CLASSES_ROOT*\shell<br>3、  在shell上右键，新建项，命名为Notepad2<br>4、  在新建的项Notepad2上右键，然后新建一个项，命名为command，新建了command之后选中command项会发现右边有相应的值，双击默认进行修改<br>5、  双击默认后对其值进行修改，先写Notepad2的路径，然后写上“%1”，点击确定 例：”E:\software\TortoiseGit\bin\notepad2.exe” “%1”</p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2018/01/01/右键添加Notepad2/">
    <time datetime="2017-12-31T16:00:00.000Z" class="entry-date">
        2018-01-01
    </time>
</a>
    
  <span class="article-delim">&#8226;</span>
  <div class="article-category">
  <a class="article-category-link" href="/categories/随记/">随记</a>
  </div>

    
    </footer>
</article>






  
    <article id="post-svnerror" class="post-svnerror post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2017/12/27/svnerror/">svn error - unable to connect to a repository at url 问题解决</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2017/12/27/svnerror/" data-id="cjzam8fzq000zgouha0ipi5vc" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <pre><code>C:\Users\dell\AppData\Roaming\Subversion
# 打开文件
servers
# 删除
proxy settings
</code></pre>
      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2017/12/27/svnerror/">
    <time datetime="2017-12-26T16:00:00.000Z" class="entry-date">
        2017-12-27
    </time>
</a>
    
  <span class="article-delim">&#8226;</span>
  <div class="article-category">
  <a class="article-category-link" href="/categories/SVN/">SVN</a>
  </div>

    
    </footer>
</article>






  
    <article id="post-node" class="post-node post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2017/12/15/node/">node.js yeoman grunt 快速构建项目</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2017/12/15/node/" data-id="cjzam8fzm000tgouhm1dsvp9z" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h4 id="1-node-js-安装"><a href="#1-node-js-安装" class="headerlink" title="1. node.js 安装"></a>1. node.js 安装</h4><h4 id="2-yeoman-grunt安装"><a href="#2-yeoman-grunt安装" class="headerlink" title="2. yeoman grunt安装"></a>2. yeoman grunt安装</h4><pre><code>npm install -g bower
npm install --global yo
npm install -g grunt-cli
yo --version &amp;&amp; bower --version &amp;&amp; grunt --version
npm install -g generator-angular@0.7.1
</code></pre><h4 id="3-创建项目-安装bower、node、grunt"><a href="#3-创建项目-安装bower、node、grunt" class="headerlink" title="3. 创建项目 安装bower、node、grunt"></a>3. 创建项目 安装bower、node、grunt</h4><pre><code>$ cd d:
$ mkdir myApp
$ cd mytodo
$ yo angular
# 报错少 grunt-contrib-imagemin
# 安装 grunt-contrib-imagemin
$ npm install grunt-contrib-imagemin --save-dev

$ npm install
$ bower install
$ npm install grunt --save-dev
# 初步这样也就行了，但是/bower_components这个目录有点让人不习惯，我想把东西下载到我习惯的目录里。需要加一个.bowerrc文件。注意，不需要名字什么的，只要新增一个.bowerrc就行了。
</code></pre><h3 id="cordova-快速构建-ios、andriod、browser-项目app"><a href="#cordova-快速构建-ios、andriod、browser-项目app" class="headerlink" title="cordova 快速构建 ios、andriod、browser 项目app"></a>cordova 快速构建 ios、andriod、browser 项目app</h3><h4 id="1-安装Cordova"><a href="#1-安装Cordova" class="headerlink" title="1.安装Cordova"></a>1.安装Cordova</h4><pre><code># Cordova的命令行运行在Node.js 上面并且可以通过NPM安装。 根据 平台具体指导 安装相应平台的依赖。打开命令提示符或终端，然后键入npm install -g cordova.
$ npm install -g cordova
</code></pre><h4 id="2-创建一个项目"><a href="#2-创建一个项目" class="headerlink" title="2. 创建一个项目"></a>2. 创建一个项目</h4><pre><code>#使用命令行创建一个空的Cordova项目。导航到你希望创建项目的目录，然后键入 cordova create &lt;path&gt;。
#要知道这个命令完整的选项，键入cordova help create。
$ cordova create MyApp
</code></pre><h4 id="3-添加一个平台"><a href="#3-添加一个平台" class="headerlink" title="3. 添加一个平台"></a>3. 添加一个平台</h4><pre><code># 在创建完一个Cordova项目后，导航到项目目录。在项目目录中，你需要添加你想构建app的平台
# 为了添加平台， 键入 cordova platform add &lt;platform name&gt;。
# 为了知道你可以添加的平台，你可以运行cordova platform。
$ cd MyApp 
# browser andriod ios
$ cordova platform add browser
# $ cordova platform remove android
</code></pre><h4 id="4-运行App"><a href="#4-运行App" class="headerlink" title="4.运行App"></a>4.运行App</h4><pre><code>#在命令中,键入cordova run &lt;platform name&gt;。
# browser andriod ios
$ cordova run browser
</code></pre><h4 id="5、开发完成后，使用cordova-打包项目成目标平台的应用-。"><a href="#5、开发完成后，使用cordova-打包项目成目标平台的应用-。" class="headerlink" title="5、开发完成后，使用cordova 打包项目成目标平台的应用 。"></a>5、开发完成后，使用cordova 打包项目成目标平台的应用 <strong>。</strong></h4><pre><code># 
$ cordova build android
</code></pre><h4 id="6、进行仿真模拟器"><a href="#6、进行仿真模拟器" class="headerlink" title="6、进行仿真模拟器"></a>6、进行仿真模拟器</h4><pre><code># 
$ cordova emulate android
</code></pre><h4 id="7-添加插件"><a href="#7-添加插件" class="headerlink" title="7. 添加插件"></a>7. 添加插件</h4><p>可以用CLI搜索可用的插件：</p>
<pre><code>cordova plugin search bar code
</code></pre><p>安装插件，比如:</p>
<pre><code>cordova plugin add org.apache.cordova.device                   //设备API

cordova plugin add org.apache.cordova.network-information  //网络（事件）

cordova plugin add org.apache.cordova.battery-status      //电池（事件）

cordova plugin add org.apache.cordova.device-motion     //加速器

cordova plugin add org.apache.cordova.device-orientation     //罗盘

cordova plugin add org.apache.cordova.geolocation         //定位

cordova plugin add org.apache.cordova.camera                 //摄像头

cordova plugin add org.apache.cordova.media-capture     //媒体文件处理

cordova plugin add org.apache.cordova.media                   //媒体文件处理

cordova plugin add org.apache.cordova.file                        //文件访问

cordova plugin add org.apache.cordova.file-transfer          //文件传输

cordova plugin add org.apache.cordova.dialogs                 //对话框

cordova plugin add org.apache.cordova.vibration              //震动

cordova plugin add org.apache.cordova.contacts               //联系人

cordova plugin add org.apache.cordova.globalization       //全球化

cordova plugin add org.apache.cordova.splashscreen       //闪屏

cordova plugin add org.apache.cordova.inappbrowser             //打开新的浏览器窗口

cordova plugin add org.apache.cordova.console                //调试控制台
</code></pre><p>你可以用以下命令查看所有已经安装的插件</p>
<pre><code>cordova plugin ls
</code></pre><p>使用以下命令删除插件：</p>
<pre><code>cordova plugin rm org.apache.cordova.console
</code></pre><p>或者通过地址来添加插件：</p>
<pre><code>cordova plugin add https://github.com/apache/cordova-plugin-console.git
</code></pre><h3 id="Android-SDK"><a href="#Android-SDK" class="headerlink" title="Android SDK"></a>Android SDK</h3><p>Android SDK的国内镜像服务器来下载安装，这里推荐几个：</p>
<p>1、中科院开源协会镜像站地址:</p>
<p>IPV4/IPV6 : <a href="http://mirrors.opencas.ac.cn" target="_blank" rel="noopener">http://mirrors.opencas.ac.cn</a> 端口：80</p>
<p>2、北京化工大学镜像服务器地址：</p>
<p>IPv4: <a href="http://ubuntu.buct.edu.cn/" target="_blank" rel="noopener">http://ubuntu.buct.edu.cn/</a>  端口：80</p>
<p>IPv4: <a href="http://ubuntu.buct.cn/" target="_blank" rel="noopener">http://ubuntu.buct.cn/</a>  端口：80</p>
<p>IPv6: <a href="http://ubuntu.buct6.edu.cn/" target="_blank" rel="noopener">http://ubuntu.buct6.edu.cn/</a>   端口：80</p>
<p>3、大连东软信息学院镜像服务器地址:<br><a href="http://mirrors.neusoft.edu.cn" target="_blank" rel="noopener">http://mirrors.neusoft.edu.cn</a>  端口：80</p>
<h3 id="ionic"><a href="#ionic" class="headerlink" title="ionic"></a>ionic</h3><pre><code># 更新 cordova ionic
# npm update -g cordova ionic
$ npm install -g ionic
$ ionic start myApp tabs
# demo
$ ionic start myproject --type ionic1
# 启动
$ ionic serve
# 启动 指定IP地址
$ ionic serve --address 192.168.20.45
</code></pre><h4 id="1-创建Android应用"><a href="#1-创建Android应用" class="headerlink" title="1.创建Android应用"></a>1.创建Android应用</h4><pre><code>#
$ cd myApp
$ ionic platform add android
$ ionic build android
$ ionic emulate android
</code></pre><h4 id="2-创建iOS应用"><a href="#2-创建iOS应用" class="headerlink" title="2.创建iOS应用"></a>2.创建iOS应用</h4><pre><code>#
$ cd myApp
$ ionic platform add ios
$ ionic build ios
$ ionic emulate ios
</code></pre><h4 id="3-启动"><a href="#3-启动" class="headerlink" title="3. 启动"></a>3. 启动</h4><pre><code>#
$ ionic serve
</code></pre><p>通过Ionic创建一个项目</p>
<p>使用Ionic官方提供的现成的应用程序模板，或一个空白的项目创建一个Ionic应用。</p>
<pre><code>ionic start myApp blank  创建一个空白的app项目 

ionic start myApp tabs 创建一个带有tabs项目

ionic start myApp sidemenu 创建一个带有滑动的项目
</code></pre><p>如果出现”ios-sim was not found.”错误，可以执行以下命令：</p>
<pre><code>npm install -g ios-sim
</code></pre>
      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2017/12/15/node/">
    <time datetime="2017-12-14T16:00:00.000Z" class="entry-date">
        2017-12-15
    </time>
</a>
    
  <span class="article-delim">&#8226;</span>
  <div class="article-category">
  <a class="article-category-link" href="/categories/Node/">Node</a>
  </div>

    
    </footer>
</article>






  
    <article id="post-oracle-expdp-impdp" class="post-oracle-expdp-impdp post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2017/09/01/oracle-expdp-impdp/">oracle expdp / impdp</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2017/09/01/oracle-expdp-impdp/" data-id="cjzam8fzj000ogouhqdmxp5c5" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h3 id="expdp-导出"><a href="#expdp-导出" class="headerlink" title="expdp 导出"></a>expdp 导出</h3><pre><code>expdp TQBAY/TQBAY schemas=TQBAY dumpfile=TQBAY_20170519.dmp;
</code></pre><h3 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h3><pre><code>-- 删除用户
drop user BOSYUNTEST cascade;
-- 删除用户时若报错：ORA-01940: cannot drop a user that is currently connected，则先查会话id
SELECT SID,SERIAL# FROM V$SESSION WHERE USERNAME=&apos;TQBAY&apos;;
-- 再一个个kill掉该用户的会话再执行drop user
ALTER SYSTEM KILL SESSION &apos;24,25341&apos;;
</code></pre><h3 id="查询表空间路径"><a href="#查询表空间路径" class="headerlink" title="查询表空间路径"></a>查询表空间路径</h3><pre><code>select * from dba_data_files;
</code></pre><h3 id="删除表空间和文件"><a href="#删除表空间和文件" class="headerlink" title="删除表空间和文件"></a>删除表空间和文件</h3><pre><code>-- 删除临时表空间和文件
drop tablespace BOSYUN_TEST_TEMP including contents and datafiles;
-- 删除数据表空间和文件
drop tablespace BOSYUN_TEST_DATA including contents and datafiles;
drop tablespace BOSYUN_TEST_DATA including contents and datafiles;
</code></pre><h3 id="创建表空间"><a href="#创建表空间" class="headerlink" title="创建表空间"></a>创建表空间</h3><pre><code>-- 创建临时表空间
CREATE SMALLFILE TEMPORARY TABLESPACE BOSYUN_TEST_TEMP TEMPFILE &apos;/u01/app/oracle/oradata/XE/BOSYUN_TEST_TEMP&apos; SIZE 2048M AUTOEXTEND ON NEXT 512M MAXSIZE UNLIMITED EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1M;
-- 创建数据表空间
CREATE SMALLFILE TABLESPACE BOSYUN_TEST_DATA DATAFILE &apos;/u01/app/oracle/oradata/XE/BOSYUN_TEST_DATA&apos; SIZE 2048M AUTOEXTEND ON NEXT 512M MAXSIZE UNLIMITED LOGGING EXTENT MANAGEMENT LOCAL SEGMENT SPACE MANAGEMENT AUTO;
-- 创建用户
CREATE USER BOSYUNTEST PROFILE &quot;DEFAULT&quot; IDENTIFIED BY BOSYUNTEST DEFAULT TABLESPACE BOSYUN_TEST_DATA TEMPORARY TABLESPACE BOSYUN_TEST_TEMP ACCOUNT UNLOCK;
-- 用户授权
GRANT CONNECT TO BOSYUNTEST WITH ADMIN OPTION;
GRANT DBA TO BOSYUNTEST;
GRANT RESOURCE TO BOSYUNTEST;
</code></pre><h3 id="可通过以下命令查看数据库已有的目录-："><a href="#可通过以下命令查看数据库已有的目录-：" class="headerlink" title="可通过以下命令查看数据库已有的目录 ："></a>可通过以下命令查看数据库已有的目录 <strong>：</strong></h3><pre><code># 查询 DATA_PUMP_DIR
select * from DBA_DIRECTORIES;
 /home/oracle/oradata/bosyun/dpdump/        DATA_PUMP_DIR

-- 创建 DATA_PUMP_DIR目录
create or replace directory DATA_PUMP_DIR as &apos;D:\app\Administrator\admin\orcl\dpdump&apos;;
1.修改/data/oracle/product/11.2.0/db_1/network/admin/tnsnames.ora 
2.把dmp文件放到DATA_PUMP_DIR目录下 （预先将dmp文件放置到指定的directory目录下，

-- DATA_PUMP_DIR 需要预先将目录权限赋予该用户。
grant read,write on directory DATA_PUMP_DIR to TQBAY_TEST;
</code></pre><h3 id="数据的导入"><a href="#数据的导入" class="headerlink" title="数据的导入"></a>数据的导入</h3><pre><code>impdp TQBAY_TEST/TQBAY_TEST@bosyun directory=DATA_PUMP_DIR dumpfile=TQBAY_20170519.dump REMAP_SCHEMA=TQBAY:TQBAY_TEST;

# 上面可能有点问题，因为有的表已经存在，然后它就报错，对该表就不进行导入。  在后面加上 ignore=y 就可以了。
# 基本上上面的导入导出够用了。不少情况要先是将表彻底删除，然后导入。
</code></pre><h3 id="杂项"><a href="#杂项" class="headerlink" title="杂项"></a>杂项</h3><pre><code>select * from DBA_DIRECTORIES; --查询表 DATA_PUMP_DIR
select * from product_component_version;  --查询oracle版本

 --------oracle 解锁用户-------
su - oracle
sqlplus / as sysdba  --执行
sql : alter user QICOLOR account unlock; --QICOLOR 用户解锁
alter user QICOLOR_FORMAL account unlock;

select userenv(&apos;language&apos;) from dual;-- 字符集
------------------------------
</code></pre><h3 id="数据库重启"><a href="#数据库重启" class="headerlink" title="数据库重启"></a>数据库重启</h3><pre><code>#关闭数据库存
$export ORACLE_SID=QICOLOR
$su - oracle
$sqlplus / as sysdba
$shutdown immediate
$lsnrctl stop

$export ORACLE_SID=TQBAY
$su - oracle
$sqlplus / as sysdba
$shutdown immediate
$lsnrctl stop

#启动数据库
$su - oracle
$sqlplus / as sysdba
$startup
$lsnrctl start
</code></pre><h3 id="oracle-管理员不用密码登录"><a href="#oracle-管理员不用密码登录" class="headerlink" title="oracle 管理员不用密码登录"></a>oracle 管理员不用密码登录</h3><pre><code>（1） 以oracle身份登录数据库，命令：su - oracle
（2） 进入Sqlplus控制台，命令：sqlplus /nolog
（3） 以系统管理员登录，命令：connect / as sysdba
</code></pre>
      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2017/09/01/oracle-expdp-impdp/">
    <time datetime="2017-08-31T16:00:00.000Z" class="entry-date">
        2017-09-01
    </time>
</a>
    
  <span class="article-delim">&#8226;</span>
  <div class="article-category">
  <a class="article-category-link" href="/categories/数据库/">数据库</a>
  </div>

    
    </footer>
</article>






  
    <article id="post-1.ssh用户权限配置" class="post-1.ssh用户权限配置 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2017/02/06/1.ssh用户权限配置/">ssh用户权限配置</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2017/02/06/1.ssh用户权限配置/" data-id="cjzam8fyw0000gouh07v21943" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>本文主要介绍的是如何是Linux环境下配置ssh用户权限，因为很多时候不给用户root账号，下面就和大家一起分享如何配置ssh用户权限。</p>
<pre><code>1. 添加用户

adduser huapisong  //添加一个名为huapisong的用户
passwd huapisong   //修改密码
Changing password for user huapisong.
New UNIX password:     //在这里输入新密码
Retype new UNIX password:  //再次输入新密码
passwd: all authentication tokens updated successfully.

2. 赋予root权限

方法一：修改 /etc/sudoers 文件，找到下面一行，把前面的注释（#）去掉
## Allows people in group wheel to run all commands
%wheel    ALL=(ALL)    ALL
# 然后修改用户，使其属于root组（wheel），命令如下：

usermod -g root huapisong
# 修改完毕，现在可以用huapisong帐号登录，然后用命令 su - ，即可获得root权限进行操作。

方法二：修改 /etc/sudoers 文件，找到下面一行，在root下面添加一行，如下所示：
## Allow root to run any commands anywhere
root    ALL=(ALL)     ALL
huapisong   ALL=(ALL)     ALL
#修改完毕，现在可以用huapisong帐号登录，然后用命令 su - ，即可获得root权限进行操作。

3. 用useradd新增的用户不能直接用ssh远程访问，需要修改ssh相关配置
如下：
vi /etc/ssh/sshd_config 
#添加
AllowUsers root huapisong
#多个用户用空格隔开

4. 然后重启sshd服务生效即可，重启命令可以使用:
#shell
service sshd restart
</code></pre>
      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2017/02/06/1.ssh用户权限配置/">
    <time datetime="2017-02-05T16:00:00.000Z" class="entry-date">
        2017-02-06
    </time>
</a>
    
  <span class="article-delim">&#8226;</span>
  <div class="article-category">
  <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

    
    </footer>
</article>






  
    <article id="post-2.在Centos7下的nginx编译安装" class="post-2.在Centos7下的nginx编译安装 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2017/01/06/2.在Centos7下的nginx编译安装/">在Centos7下的nginx编译安装</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2017/01/06/2.在Centos7下的nginx编译安装/" data-id="cjzam8fz00001gouhvqzoi8ru" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>2.1 安装依赖</p>
<pre><code>yum -y install gcc gcc-c++ autoconf automake
yum -y install zlib zlib-devel openssl openssl-devel pcre-devel
</code></pre><p>2.2 创建用户和组<br>    groupadd -r nginx<br>    useradd -s /sbin/nologin -g nginx -r nginx<br>2.3 下载安装包<br>    wget <a href="http://nginx.org/download/nginx-1.10.2.tar.gz" target="_blank" rel="noopener">http://nginx.org/download/nginx-1.10.2.tar.gz</a><br>2.4 编译配置与安装</p>
<pre><code># 解压缩
tar -zxvf nginx-1.10.2.tar.gz

# 进入压缩目录
cd nginx-1.10.2

# 进行模块配置
./configure \
  --prefix=/usr \
  --sbin-path=/usr/sbin/nginx \
  --conf-path=/etc/nginx/nginx.conf \
  --error-log-path=/var/log/nginx/error.log \
  --http-log-path=/var/log/nginx/access.log \
  --pid-path=/var/run/nginx/nginx.pid  \
  --lock-path=/var/lock/nginx.lock \
  --user=nginx \
  --group=nginx \
  --with-http_ssl_module \
  --with-http_flv_module \
  --with-http_stub_status_module \
  --with-http_gzip_static_module \
  --http-client-body-temp-path=/var/tmp/nginx/client/ \
  --http-proxy-temp-path=/var/tmp/nginx/proxy/ \
  --http-fastcgi-temp-path=/var/tmp/nginx/fcgi/ \
  --http-uwsgi-temp-path=/var/tmp/nginx/uwsgi \
  --http-scgi-temp-path=/var/tmp/nginx/scgi \
  --with-pcre

# 编译安装
make &amp;&amp; make install
</code></pre><p>2.5 安装路径</p>
<pre><code># 名称路径日志目录
/var/log/nginx
# 配置目录
/etc/nginx
# PID文件
/var/run/nginx/nginx.pid
# 启动文件
/usr/sbin/nginx
</code></pre><p>2.6 centos6服务脚本</p>
<pre><code>#创建文件
touch /etc/rc.d/init.d/nginx
chmod +x /etc/rc.d/init.d/nginx
</code></pre><p>启动脚本</p>
<pre><code>#!/bin/sh  
#  
# nginx - this script starts and stops the nginx daemon  
#  
# chkconfig:   - 85 15  
# description:  Nginx is an HTTP(S) server, HTTP(S) reverse \  
#               proxy and IMAP/POP3 proxy server  
# processname: nginx  

# Source function library.  
. /etc/rc.d/init.d/functions  

# Source networking configuration.  
. /etc/sysconfig/network  

# Check that networking is up.  
[ &quot;$NETWORKING&quot; = &quot;no&quot; ] &amp;&amp; exit 0  

nginx=&quot;/usr/sbin/nginx&quot;  
prog=$(basename $nginx)  

sysconfig=&quot;/etc/sysconfig/$prog&quot;  
lockfile=&quot;/var/lock/nginx.lock&quot;  
pidfile=&quot;/var/run/nginx/${prog}.pid&quot;  

NGINX_CONF_FILE=&quot;/etc/nginx/nginx.conf&quot;  

[ -f $sysconfig ] &amp;&amp; . $sysconfig  

start() {  
    [ -x $nginx ] || exit 5  
    [ -f $NGINX_CONF_FILE ] || exit 6  
    echo -n $&quot;Starting $prog: &quot;  
    daemon $nginx -c $NGINX_CONF_FILE  
    retval=$?  
    echo  
    [ $retval -eq 0 ] &amp;&amp; touch $lockfile  
    return $retval  
}  

stop() {  
    echo -n $&quot;Stopping $prog: &quot;  
    killproc -p $pidfile $prog  
    retval=$?  
    echo  
    [ $retval -eq 0 ] &amp;&amp; rm -f $lockfile  
    return $retval  
}  

restart() {  
    configtest_q || return 6  
    stop  
    start  
}  

reload() {  
    configtest_q || return 6  
    echo -n $&quot;Reloading $prog: &quot;  
    killproc -p $pidfile $prog -HUP  
    echo  
}  

configtest() {  
    $nginx -t -c $NGINX_CONF_FILE  
}  

configtest_q() {  
    $nginx -t -q -c $NGINX_CONF_FILE  
}  

rh_status() {  
    status $prog  
}  

rh_status_q() {  
    rh_status &gt;/dev/null 2&gt;&amp;1  
}  

# Upgrade the binary with no downtime.  
upgrade() {  
    local oldbin_pidfile=&quot;${pidfile}.oldbin&quot;  

    configtest_q || return 6  
    echo -n $&quot;Upgrading $prog: &quot;  
    killproc -p $pidfile $prog -USR2  
    retval=$?  
    sleep 1  
    if [[ -f ${oldbin_pidfile} &amp;&amp; -f ${pidfile} ]];  then  
        killproc -p $oldbin_pidfile $prog -QUIT  
        success $&quot;$prog online upgrade&quot;  
        echo   
        return 0  
    else  
        failure $&quot;$prog online upgrade&quot;  
        echo  
        return 1  
    fi  
}  

# Tell nginx to reopen logs  
reopen_logs() {  
    configtest_q || return 6  
    echo -n $&quot;Reopening $prog logs: &quot;  
    killproc -p $pidfile $prog -USR1  
    retval=$?  
    echo  
    return $retval  
}

case &quot;$1&quot; in
    start)
        rh_status_q &amp;&amp; exit 0
        $1
        ;;
    stop)
        rh_status_q || exit 0
        $1
        ;;
    restart|configtest|reopen_logs)
        $1
        ;;
    force-reload|upgrade)
        rh_status_q || exit 7
        upgrade
        ;;
    reload)
        rh_status_q || exit 7
        $1
        ;;
    status|status_q)
        rh_$1
        ;;
    condrestart|try-restart)
        rh_status_q || exit 7
        restart
        ;;
    *)
        echo $&quot;Usage: $0 {start|stop|reload|configtest|status|force-reload|upgrade|restart|reopen_logs}&quot;
        exit 2
esac
</code></pre><p>开机启动方式</p>
<pre><code># 开机启动
chkconfig --add nginx
chkconfig --level 345 nginx on
chkconfig --list nginx

# 开机不启动
chkconfig nginx off
chkconfig --list nginx
</code></pre><p>2.7 centos7服务脚本</p>
<pre><code># 创建文件
touch /usr/lib/systemd/system/nginx.service
# 启动脚本
[Unit]
Description=nginx
After=network.target remote-fs.target nss-lookup.target

[Service]
Type=forking
ExecStart=/usr/sbin/nginx
ExecReload=/usr/local/nginx/sbin/nginx -s reload
ExecStop=/usr/local/nginx/sbin/nginx -s stop
PrivateTmp=true

[Install]
WantedBy=multi-user.target

# 开机启动方式

# 开机启动
systemctl enable nginx.service

# 开机不启动
systemctl disable nginx.service

# 其他操作
systemcl ( status | start | stop | reload | restart ) nginx.service
</code></pre>
      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2017/01/06/2.在Centos7下的nginx编译安装/">
    <time datetime="2017-01-05T16:00:00.000Z" class="entry-date">
        2017-01-06
    </time>
</a>
    
  <span class="article-delim">&#8226;</span>
  <div class="article-category">
  <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

    
    </footer>
</article>






  
    <article id="post-linux安装JDK" class="post-linux安装JDK post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2017/01/06/linux安装JDK/">Linux 下安装JDK1.8</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2017/01/06/linux安装JDK/" data-id="cjzam8fzh000kgouhzgoeuz3p" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>本文主要介绍的是如何是Linux环境下安装JDK的，因为Linux环境下，很多时候也离不开Java的，下面就和大家一起分享如何jdk1.8的过程吧。</p>
<p>一、安装环境</p>
<pre><code>● Centos6.5系统
● JDK版本：1.8
● 工具： FlashFXP V5.2.0, MobaXterm V10.5
</code></pre><p>二、安装步骤</p>
<p>第一步：下载安装包</p>
<pre><code>下载Linux环境下的jdk1.8，请去（官网）中下载jdk的安装文件；

由于我的Linux是64位的，因此我下载jdk-8u131-linux-x64.tar.gz。
</code></pre><p>第二步： 上传jdk1.8 安装包</p>
<pre><code># 上传jdk1.8 安装包
scp jdk-8u131-linux-x64.tar.gz root@10.10.201.102:/haupisong/java
# 进入jdk目录
cd /hupisong/java/
# 解压JDK1.8安装包
tar -zxvf jdk-8u131-linux-x64.tar.gz
</code></pre><p>第三步、修改环境变量</p>
<pre><code># 编辑文件
vi /etc/profile
# 按 &apos;i&apos; 键编辑
# 编辑,在最后一行添加
# 添加内容如下 
export JAVA_HOME=/huapisong/java/jdk1.6.0_65 
export PATH=$JAVA_HOME/bin:$PATH
# 退出编辑并保存：
# 按&apos;esc&apos;键退出编辑 
# 输入&apos;:wq&apos; 保存编辑内容
:wq 
# 加载设置的变量，使其生效
 source /etc/profile
</code></pre><p>第四步、测试是否安装成功</p>
<pre><code># 输入命令
java -version
#成功结果如下：
java version &quot;1.8.0_131&quot;
Java(TM) SE Runtime Environment (build 1.8.0_131-b11)
Java HotSpot(TM) 64-Bit Server VM (build 25.131-b11, mixed mode)
</code></pre><p>至此，安装结束</p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2017/01/06/linux安装JDK/">
    <time datetime="2017-01-05T16:00:00.000Z" class="entry-date">
        2017-01-06
    </time>
</a>
    
  <span class="article-delim">&#8226;</span>
  <div class="article-category">
  <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

    
    </footer>
</article>






  
    <article id="post-3.服务器上的iptables防火墙应该如何配置才能更安全" class="post-3.服务器上的iptables防火墙应该如何配置才能更安全 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2017/01/01/3.服务器上的iptables防火墙应该如何配置才能更安全/">服务器上的iptables防火墙应该如何配置才能更安全</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2017/01/01/3.服务器上的iptables防火墙应该如何配置才能更安全/" data-id="cjzam8fz40004gouhhux9vnoe" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>3.1 背景</p>
<pre><code>新入网的服务器在不做任何配置的情况下将会出现很多安全问题。端口肆意暴露、来源请求不明，恶意的数据包源源不断的流入服务器中。
    公有云或许会控制非常用端口的访问，只开通如22、80、8080或者8443这样的常用端口，尽管屏蔽了大多数端口，但有效的做好防火墙规则仍然很重要。
    下面流程化说明防火墙配置步骤
</code></pre><p>3.2 封口</p>
<p>将输入、输出、转向的数据包丢弃，对服务器进行彻底隔离，在封闭的环境中配置规则。这里值得提醒的是此操作需要在本机执行，因为 telnet 或者 ssh 的连接会当即断开。</p>
<pre><code> # 丢弃输入数据流向 
iptables -P INPUT DROP
 # 丢弃输出数据流向 
iptables -P OUTPUT DROP
# 丢弃转向数据流向 
iptables -P FORWARD DROP
</code></pre><p>3.3 开放SSH服务</p>
<p>首先确保 ssh 远程连接开放，添加对 ssh 服务的出入站规则，正常端口为22（端口应该更换成非22）</p>
<pre><code># 允许任务来源接入服务器的22端口
iptables -A INPUT -p tcp --dport 22 -j ACCEPT
# 允许服务器通过22端口向任何来源发送数据包
iptables -A OUTPUT -p tcp --sport 22 -j ACCEPT
做好以上的 ssh 服务规则后，任何来源等可以连接，若要求更高级的安全则可以添加准入IP，可以添加多条，其他服务同理。
# 允许来源IP为221.4.12.28的地址访问服务器的22端口，即ssh服务
iptables -I INPUT -s 221.4.12.28 -p tcp --dport 22 -j ACCEPT
</code></pre><p>3.4 启用Ping命令</p>
<p>当执行 ping 命令时，其实是向目标地址发送 icmp 的数据包并得到回显信息。在服务器内部 ping 外部地址时，属于 OUTPUT，由于服务器的输出已经被DROP掉，所以服务器目前 ping 不通任何外部 IP 地址，考虑到运维的需要，添加允许 ping 外部IP的规则。</p>
<pre><code># 允许服务器向外部发送icmp的数据包
iptables -A OUTPUT -p icmp --icmp-type echo-request -j ACCEPT
# 允许服务器接收来自外部服务器返回的icmp数据包
iptables -A INPUT -p icmp --icmp-type echo-reply -j ACCEPT
</code></pre><p>目前服务器可以 ping 外部IP地址了，但外部来源 ping 服务器是不通的。选择不开放来自外部的 ping 请求或许是一个好想法，这样可以迷惑扫描工具避免暴露主机的存活性(高级的扫描工具除外，如 nmap)。<br>下面是服务器接收和响应 ping 请求的出入站规则</p>
<pre><code># 允许任何来源向服务器发送icmp的数据包
iptables -A INPUT -p icmp --icmp-type echo-request -j ACCEPT
# 允许服务器向任何来源回显icmp的数据包
iptables -A OUTPUT -p icmp --icmp-type echo-reply -j ACCEPT
</code></pre><p>3.5 启用DNS服务<br>服务器 ping 外部IP地址正常了，但 ping 外部的域名时则会显示 unknown host 的错误，这是因为 DNS 服务的53端口没有配置出入站规则。<br>下面是 DNS 服务的规则:</p>
<pre><code>iptables -A INPUT -p udp -i eth0 --sport 53 -j ACCEPT
iptables -A OUTPUT -p udp -o eth0 --dport 53 -j ACCEPT
</code></pre><p>3.6 下载软件<br>现在服务器需要从外部下载某些软件，通常我们会使用 wget 或者 curl 这样的工具，执行时发现一直卡着不动。这是因为服务器访问外网的80端口出站和入站规则没有配置，需要添加，如下：</p>
<pre><code>iptables -A OUTPUT -p tcp --dport 80 -j ACCEPT
iptables -A INPUT -p tcp --sport 80 -j ACCEPT
</code></pre><p>备注：使用类似与nginx代理转发到内网主机上某个服务时，同样也需要添加如上规则。如转发到内网 192.168.1.22 上的 48443的服务，规则如下：<br>        iptables -A OUTPUT -p tcp –dport 48843 -j ACCEPT<br>        iptables -A INPUT -p tcp –sport 48843 -j ACCEPT<br>3.7 启用本地回路loopback<br>本地回路即 localhost，运维时通常会使用本地回路判断某些服务是否正常，这个必要有。</p>
<pre><code>iptables -A INPUT -i lo -j ACCEPT
iptables -A OUTPUT -o lo -j ACCEPT
</code></pre><p>当需要开放本地端口，如127.0.0.1或者localhost的端口时，可以使用以下命令使 通过127.0.0.1的访问全部通过<br>        iptables -A INPUT -i lo -j ACCEPT<br>3.8 应用端规则<br>应用端规则指的是如 nginx、apache 等应用，启动后，默认情况下外网是不能访问的。如需要开通 nginx 的 80 和 443 端口，其他应用类似。</p>
<pre><code>iptables -A INPUT -p tcp --dport 80 -j ACCEPT
iptables -A OUTPUT -p tcp --sport 80 -j ACCEPT
iptables -A INPUT -p tcp --dport 443 -j ACCEPT
iptables -A OUTPUT -p tcp --sport 443 -j ACCEPT
</code></pre><p>3.9 删除规则</p>
<pre><code>iptables -L -n --line-number
iptables -D INPUT 15
iptables -D OUTPUT 13
</code></pre>
      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2017/01/01/3.服务器上的iptables防火墙应该如何配置才能更安全/">
    <time datetime="2016-12-31T16:00:00.000Z" class="entry-date">
        2017-01-01
    </time>
</a>
    
  <span class="article-delim">&#8226;</span>
  <div class="article-category">
  <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

    
    </footer>
</article>






  
    <article id="post-4.使用Lets Encrypt为站点快速部署SSL证书" class="post-4.使用Lets Encrypt为站点快速部署SSL证书 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2017/01/01/4.使用Lets Encrypt为站点快速部署SSL证书/">使用Lets Encrypt为站点快速部署SSL证书</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2017/01/01/4.使用Lets Encrypt为站点快速部署SSL证书/" data-id="cjzam8fz30003gouhpd3isvox" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>4.1.使用背景</p>
<pre><code>时常搜索”免费ssl证书”，申请和验证步骤很麻烦，审核时间也不定，”Lets Encrypt“是一个倡导互联网上所有网站都该使用https的组织，提供免费的ssl证书服务。
</code></pre><p>4.2.下载安装脚本</p>
<pre><code>下载Github上贡献者做好的安装脚本，如下：
wget https://raw.githubusercontent.com/xdtianyu/scripts/master/lets-encrypt/letsencrypt.conf
wget https://raw.githubusercontent.com/xdtianyu/scripts/master/lets-encrypt/letsencrypt.sh

# 赋予执行权限
chmod +x letsencrypt.sh
</code></pre><p>4.3.配置相关信息</p>
<pre><code>使用vi letsencrypt.conf打开配置文件，将里面的 example.com 换成自己的域名，如下：
# only modify the values, key files will be generated automaticly.
ACCOUNT_KEY=&quot;letsencrypt-account.key&quot;
DOMAIN_KEY=&quot;tiger.com.key&quot;
DOMAIN_DIR=&quot;/usr/local/openresty/nginx/html&quot;
DOMAINS=&quot;DNS:test.tiger.com&quot;
#ECC=TRUE
#LIGHTTPD=TRUE
</code></pre><p>按以往免费申请ssl的经历，通常都需要验证域名的所属权，不是通过配置二级域名验证就是需要在网站根目录上传验证文件，经过试用 Lets Encrypt，发现它使用的是第二种方式。</p>
<p>所以在使用nginx做动态代理时，需要先注释掉，使用基本的静态文件方式配置nginx的虚拟主机以便 Lets Encrypt 去做验证，等ssl安装好之后在配置成动态代理即可。<br>所以上述配置文件中的 DOMAIN_DIR 很重要，否则会执行失败</p>
<p>4.4.执行证书生成</p>
<pre><code>./letsencrypt.sh ./letsencrypt.conf
</code></pre><p>没有什么错误就会生成如下的几个文件，其中tiger.chained.crt和tiger.com.key就是需要的文件。</p>
<pre><code>letsencrypt-account.key
tiger.crt
tiger.csr
tiger.chained.crt
tiger.com.key
</code></pre><p>4.5.配置证书安装</p>
<p>这里使用nginx进行证书安装的服务器</p>
<pre><code>server {
        listen       443;
        server_name  test.tiger.com;

    ssl on;
    ssl_certificate tiger.chained.crt;
    ssl_certificate_key tiger.com.key;
    ssl_session_timeout 5m;

    location / {
        root html;
        index  index.html index.htm;
    }
}
</code></pre>
      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2017/01/01/4.使用Lets Encrypt为站点快速部署SSL证书/">
    <time datetime="2016-12-31T16:00:00.000Z" class="entry-date">
        2017-01-01
    </time>
</a>
    
  <span class="article-delim">&#8226;</span>
  <div class="article-category">
  <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

    
    </footer>
</article>






  
    <article id="post-java中set接口的用法" class="post-java中set接口的用法 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2016/06/03/java中set接口的用法/">java中set接口的用法</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2016/06/03/java中set接口的用法/" data-id="cjzam8g0o002igouh5ezttnud" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h2 id="java中的set接口有如下的特点"><a href="#java中的set接口有如下的特点" class="headerlink" title="java中的set接口有如下的特点"></a>java中的set接口有如下的特点</h2><pre><code>不允许出现重复元素；
集合中的元素位置无顺序；
有且只有一个值为null的元素。
</code></pre><p>因为java中的set接口模仿了数学上的set抽象，所以，对应的数学上set的特性为：</p>
<pre><code>互异性：一个集合中，任何两个元素都认为是不相同的，即每个元素只能出现一次。

无序性：一个集合中，每个元素的地位都是相同的，元素之间是无序的。集合上可以定义序关系，定义了序关系后，元素之间就可以按照序关系排序。但就集合本身的特性而言，元素之间没有必然的序。

空集的性质：空集是一切集合的子集



  Set不保存重复的元素。Set中最常被使用的是测试归属性，你可以很容易的询问某个对象是否在某个Set中。Set具有与Collection完全一样的接口，因此没有任何额外的功能。实际上Set就是Collection，只是行为不同。
</code></pre><p>实现了Set接口的主要有HashSet、TreeSet、LinkedHashSet这几个共同点就是每个相同的项只保存一份。他们也有不同点，区别如下：</p>
<h2 id="1-HashSet"><a href="#1-HashSet" class="headerlink" title="1. HashSet"></a>1. HashSet</h2><p>HashSet使用的是相当复杂的方式来存储元素的，使用HashSet能够最快的获取集合中的元素，效率非常高（以空间换时间）。会根据hashcode和equals来庞端是否是同一个对象，如果hashcode一样，并且equals返回true，则是同一个对象，不能重复存放。</p>
<pre><code>package cn.set;

import java.util.HashSet;
import java.util.Set;

class Student{
    int id;
    public Student(int id) {
        this.id = id;
    }
    @Override
    public String toString() {
        return this.id+&quot;&quot;;
    }
    @Override
    public int hashCode() {
        return this.id;
    }
    @Override
    public boolean equals(Object obj) {
        if (obj instanceof Student){
            Student  stu = (Student) obj;
            if (stu.id == this.id)
                return true;
        }
        return false;
    }
}
public class HashSetTest {
    public static void main(String[] args) {
        Set&lt;Student&gt; set = new HashSet&lt;Student&gt;();
        Student s1 = new Student(1);
        Student s2 = new Student(1);
        Student s3 = new Student(2);
        set.add(s1);
        set.add(s2);
        set.add(s3);
        for (Student s : set) {
            System.out.println(s);
        }
    }
}
</code></pre><p>正如上例所示，重写了hashCode()和equals()方法来区分同意对象后，就不能存放同以对象了。如果注释这两个方法，则所有Student对象视为不同对象，都可以存放。</p>
<h2 id="2-TreeSet"><a href="#2-TreeSet" class="headerlink" title="2.TreeSet"></a>2.TreeSet</h2><p>　　TreeSet也不能存放重复对象，但是TreeSet会自动排序，如果存放的对象不能排序则会报错，所以存放的对象必须指定排序规则。排序规则包括自然排序和客户排序。</p>
<p>　　①自然排序：TreeSet要添加哪个对象就在哪个对象类上面实现java.lang.Comparable接口，并且重写comparaTo()方法，返回0则表示是同一个对象，否则为不同对象。</p>
<p>　　②客户排序：建立一个第三方类并实现java.util.Comparator接口。并重写方法。定义集合形式为TreeSet ts = new TreeSet(new 第三方类());</p>
<p>下面一个例子用TreeSet存放自然排序的对象：</p>
<pre><code>package cn.set;

import java.util.Set;
import java.util.TreeSet;

class Student1 implements Comparable&lt;Student1&gt;{
    int id;
    public Student1(int id) {
        this.id = id;
    }
    @Override
    public String toString() {
        return this.id+&quot;&quot;;
    }
    @Override
    public int hashCode() {
        return this.id;
    }
    @Override
    public boolean equals(Object obj) {
        if (obj instanceof Student1){
            Student1  stu = (Student1) obj;
            if (stu.id == this.id)
                return true;
        }
        return false;
    }
    public int compareTo(Student1 o) {
        return (this.id-o.id);
    }
}

public class TreeSetTest {
    public static void main(String[] args) {
        Set&lt;Student1&gt; set = new TreeSet&lt;Student1&gt;();
        Student1 s1 = new Student1(5);
        Student1 s2 = new Student1(1);
        Student1 s3 = new Student1(2);
        Student1 s4 = new Student1(4);
        Student1 s5 = new Student1(3);
        set.add(s1);
        set.add(s2);
        set.add(s3);
        set.add(s4);
        set.add(s5);
        for (Student1 s : set) {
            System.out.println(s);
        }
    }

}
</code></pre><p>输出结果为：<br>    1<br>    2<br>    3<br>    4<br>    5</p>
<p>下面一个例子用TreeSet存放客户排序的对象：</p>
<pre><code>package com.set;

import java.util.Set;
import java.util.TreeSet;

class Student1 implements Comparable&lt;Student1&gt;{
    int id;
    public Student1(int id) {
        this.id = id;
    }
    @Override
    public String toString() {
        return this.id+&quot;&quot;;
    }
    @Override
    public int hashCode() {
        return this.id;
    }
    @Override
    public boolean equals(Object obj) {
        if (obj instanceof Student1){
            Student1  stu = (Student1) obj;
            if (stu.id == this.id)
                return true;
        }
        return false;
    }
    public int compareTo(Student1 o) {
        return (this.id-o.id);
    }
}

public class TreeSetTest {
    public static void main(String[] args) {
        Set&lt;Student1&gt; set = new TreeSet&lt;Student1&gt;();
        Student1 s1 = new Student1(5);
        Student1 s2 = new Student1(1);
        Student1 s3 = new Student1(2);
        Student1 s4 = new Student1(4);
        Student1 s5 = new Student1(3);
        set.add(s1);
        set.add(s2);
        set.add(s3);
        set.add(s4);
        set.add(s5);
        for (Student1 s : set) {
            System.out.println(s);
        }
    }

}
</code></pre><p>输出结果为：</p>
<pre><code>5
4
3
2
1
</code></pre><p>大家都知道List存放时按照插入顺序排序的，其实也可以用自然排序和客户排序对List集合排序，大家请看：</p>
<pre><code>package cn.set;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

class MySort1 implements java.util.Comparator&lt;Student3&gt;{
    public int compare(Student3 o1, Student3 o2) {
        return o2.id-o1.id;
    }
}
class Student3 implements Comparable&lt;Student3&gt;{
    int id;
    public Student3(int id) {
        this.id = id;
    }
    @Override
    public String toString() {
        return this.id+&quot;&quot;;
    }
    public int compareTo(Student3 o) {
        return (this.id-o.id);
    }
}

public class ListSort {
    public static void main(String[] args) {
        List&lt;Student3&gt; list = new ArrayList&lt;Student3&gt;();
        Student3 s1 = new Student3(5);
        Student3 s2 = new Student3(1);
        Student3 s3 = new Student3(2);
        Student3 s4 = new Student3(4);
        Student3 s5 = new Student3(3);
        list.add(s1);
        list.add(s2);
        list.add(s3);
        list.add(s4);
        list.add(s5);
        System.out.println(list);
        //自然排序：
        Collections.sort(list);
        System.out.println(list);
        //客户排序
        Collections.sort(list, new MySort1());
        System.out.println(list);
    }
}
</code></pre><p>输出结果为：</p>
<pre><code>[5, 1, 2, 4, 3]
[1, 2, 3, 4, 5]
[5, 4, 3, 2, 1]
</code></pre>
      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2016/06/03/java中set接口的用法/">
    <time datetime="2016-06-02T16:00:00.000Z" class="entry-date">
        2016-06-03
    </time>
</a>
    
  <span class="article-delim">&#8226;</span>
  <div class="article-category">
  <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

    
    </footer>
</article>






  
  
    <nav id="pagination">
      <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/page/3/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/5/">Next &raquo;</a>
      </nav>
    </nav>
  

</div></div>
        <div id="secondary" class="widget-area" role="complementary">
  
    <aside id="search" class="widget widget_search"><form role="search" method="get" accept-charset="utf-8" id="searchform" class="searchform" action="//google.com/search">
    <div>
        <input type="text" value name="s" id="s">
        <input type="submit" id="searchsubmit" value="搜索">
    </div>
</form></aside>
  
    
  
    
  <aside class="widget">
    <h3 class="widget-title">Categories</h3>
    <div class="widget-content">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/">JS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Markdown/">Markdown</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Maven/">Maven</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Node/">Node</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/SVN/">SVN</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Cloud-Spring-Boot-微服务/">Spring Cloud Spring Boot 微服务</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Vue/">Vue</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/随记/">随记</a><span class="category-list-count">6</span></li></ul>
    </div>
  </aside>

  
    
  <aside class="widget">
    <h3 class="widget-title">Recents</h3>
    <div class="widget-content">
      <ul>
        
          <li>
            <a href="/2019/07/16/vscode vue 用户代码片段/">vscode vue 用户代码片段</a>
          </li>
        
          <li>
            <a href="/2019/06/03/netstat查看端口占用情况/">netstat 查看端口占用情况</a>
          </li>
        
          <li>
            <a href="/2019/06/03/使用 VS Code 断点调试/">vue 使用 VS Code 断点调试</a>
          </li>
        
          <li>
            <a href="/2019/06/03/vue async await/">vue 事件中的 (native)</a>
          </li>
        
          <li>
            <a href="/2019/06/03/vue 事件中的 .native/">vue 事件中的 (native)</a>
          </li>
        
      </ul>
    </div>
  </aside>

  
    
  
    
  
</div>
      </div>
      <footer id="colophon" role="contentinfo">
    <p>&copy; 2019 花皮松
    All rights reserved.</p>
    <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></p>
</footer>
    <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/js/share.js'];</script>

<script src="/js/jquery-3.3.1.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

<script src="/js/navigation.js"></script>

<div id="bg"></div>

  </div>
</body>
</html>